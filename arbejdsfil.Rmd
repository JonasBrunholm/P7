---
title: "Arbejdsfil"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

Sys.setenv(language = "en")
Sys.setlocale("LC_ALL", "English")

library(reshape2)
library(tidyquant)
library(tidyverse)

library(forecast)

library(microbenchmark)

library(aTSA)

library(gridExtra)
library(lubridate)
# devtools::install_github("rasmusdamaau/GSADF.AAU")
# library(GSADF.AAU)
```

# funktioner

```{r}
source("DF_distribution.R") # simulate Dickey Fuller distribution

source("discount.R") # discount prices, bruges i GSADF

source("p_val_fun.R") # calculate p values, bruges i GSADF

source("GSADF.R") # Implementation of GSADF

source("combined_count.R") # count number of intervals the days are in, bruges i plot_GSADF

source("plot_GSADF.R") # plot the result

source("Tabel_GSADF.R")

```

BTC 2020

```{r}
Ticker_code <- "btc-usd"
Aktie_navn <- "Bitcoin"
valuta_for_aktie <- "USD"
date_from <- "2017-01-01"
date_to <- "2019-01-01"

gsadf_u <- GSADF(ticker = Ticker_code,
                 min_window = 60,
                 step_length = 1,
                 window_increase = 1,
                 date_from = date_from,
                 date_to = date_to,
                 drift = F,
                 trend = F,
                 risk_free_rate = 0.01,
                 x = NULL)

plot_GSADF(u = gsadf_u,
           d = NULL,
           d_t = NULL, 
           p_restrict = 0.95, 
           start_date_tq_get = date_from,
           image_name = NULL, 
           valuta = valuta_for_aktie,
           aktie = Aktie_navn)


plot_GSADF(u = gsadf_u,
           d = NULL,
           d_t = NULL,
           p_restrict = 0.95,
           start_date_tq_get = date_from,
           image_name = "btc_test",
           valuta = valuta_for_aktie,
           aktie = Aktie_navn)



```

```{r}


# prÃ¸v at restringere til sidste dato og se om der er nogle aktive bobler

GSADF.AAU::GSADF()
GSADF.AAU::plot_GSADF()
GSADF.AAU::Tabel_GSADF()

```


